<!doctype HTML>
<html lang=en>
  <head>
    <meta charset=utf-8>
    <title>Bolston</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Pacifico">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Staatliches">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alice">
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    <script type="text/javascript" src="../images/config.js"></script>
  </head>
  
  <style>
    html, body {
      padding: 0;
      margin: 0;
      height: 100%;
      width: 100vw;
      font-family: 'Pacifico';
      color: #001A23;
      background-color: #F8F4F9;
      position:fixed;
      overflow:hidden;
    }

    .scrollable {
      width: 100%;
      height: 100%;
      overflow: scroll;
    }

    * {
      box-sizing: border-box;
    }

    #main {
      padding: 30px;
    }

    .fcol {
      display: flex;
      flex-direction: column;
    }

    .frow {
      display: flex;
      flex-direction: row;
    }

    .js {
      justify-content: flex-start;
    }

    .jc {
      justify-content: center;
    }

    .je {
      justify-content: flex-end;
    }

    .jb {
      justify-content: space-between;
    }

    .cvh {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translateX(-50%) translateY(-50%);
    }

    .w100 {
      width: 100%;
    }

    .h100 {
      height: 100%;
    }

    .h {
      display: none;
    }

    /*  */
    .title {
      font-size: 24pt;
    }

    /*  */
    .title2 {
      font-family: 'Staatliches';
      font-size: 216pt;
      font-weight: 900;
      color: #F8F4F9;
      text-shadow: 0px 20px 20px rgba(0,0,0,0.1),
             0px 8px 13px rgba(0,0,0,0.02),
             0px 18px 23px rgba(0,0,0,0.02);
    }

    /*  */
    @keyframes clickme {
      0% {  margin-bottom: 10px }
      50% { margin-bottom: 5px }
      100% {  margin-bottom: 10px }
    }

    .long-arrow-right {
      display: block;
      margin: 0px auto;
      margin-bottom: 10px;
      width: 20px;
      height: 20px;
      border-top: 5px solid #001A23;
      border-left: 5px solid #001A23;
      border-radius: 2px;
      transform: rotate(225deg);
      transition: all 0.5s ease;
      cursor: pointer;
      animation-name: clickme;
      animation-duration: 1s;
      animation-iteration-count: infinite;
    }
    .long-arrow-right:hover {
      transform: rotate(225deg) scale(1.1);
    }

    /*  */
    img.main {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      margin: auto;
      /* filter: drop-shadow(0 0 5px #001A23B2) drop-shadow(0 0 15px #001A2346); */
      padding: 20px;
    }

    .imgparent {
      width: 600px;
      height: 600px;
    }

    /*  */
    .content {
      padding: 50px;
    }

    .main .content {
      opacity: 0!important;
      transition: all 1s ease;
      height: calc(100% - 200px);
    }
    .main .content.ha {
      opacity: 1!important;
      z-index: 1;
    }

    /*  */
    .products {
      display: grid;
      grid-gap: auto;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)) ;
    }

    .products > div {
      width: 300px;
      height: 600px;
      padding: 30px;
      border-radius: 20px;
      background-color: #F8F4F9;
      box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
      font-family: 'Alice';
      margin-bottom: 50px;
    }

    .products > div img {
      object-fit: contain;
      max-width: 100%;
      max-height: 100%;
      margin-inline: auto;
    }

    .products > div .title {
      font-size: 20pt;
      font-weight: bold;
      margin-top: 10px
    }

    .products > div .subtitle {
      font-size: 16pt;
      margin-top: 10px;
      color: #63606C;
    }

    .products > div .text {
      font-size: 16pt;
      margin-top: 10px;
    }

    .products > div .img-parent {
      height: 300px;
      overflow: hidden;
    }

    .products > div .img-parent > img {
      min-width: 240px;
    }

    .products > div .img-parent > img:not(:last-child) {
      margin-right: 50px;
    }

    .products > div .price {
      font-size: 32pt;
    }

    .products > div .price > span {
      font-size: 18pt;
      opacity: 0.8;
    }

    .products > div .sku {
      font-size: 16pt;
      opacity: 0.8;
    }

    /*  */
    .products button {
      background-color: #EDB6A3;
      transition: all 0.5s ease;
      outline: none;
      border: none;
      border-radius: 20px;
      height: 40px;
      font-size: 16pt;
      padding-inline: 10px;
      cursor: pointer;
      color: #001A23;
    }

    .products .product:not(.out_of_stock) button:hover {
      background-color: #DD7755;
      transform: scale(1.05);
    }

    .products .product:not(.out_of_stock) button:active {
      opacity: 0.5;
    }

    /*  */
    .cats {
      margin-bottom: 50px;
    }

    .cats > div {
      font-size: 18pt;
      font-weight: bold;
      font-family: 'Alice';
      margin-right: 50px;
      cursor: pointer;
      opacity: 0.5;
    }

    .cats > div.active {
      opacity: 1;
    }

    /*  */
    .bullets {
      margin-top: 10px;
      margin-bottom: 20px;
    }

    .bullets > div > div {
      width: 12px;
      height: 12px;
      border-radius: 100%;
      background-color: #001A23;
      opacity: 0.25;
      transition: all 0.5s ease;
    }

    .bullets > div {
      min-height: 12px;
      cursor: pointer;
    }

    .bullets > div > div.active {
      opacity: 1;
    }

    .bullets > div > div:not(:last-child) {
      margin-right: 8px;
    }

    /*  */
    .colors > div {
      width: 30px;
      height: 30px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.5s ease;
      box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
    }

    .colors > div:hover {
      transform: scale(1.1);
    }

    .colors > div.active {
      transform: rotate(45deg);
    }

    .colors > div.active:hover {
      transform: rotate(45deg) scale(1.1);
    }

    .colors > div:not(:last-child) {
      margin-right: 15px;
    }

    @keyframes contactanosanim {
      0% { transform: rotate(0deg); }
      80% { transform: rotate(0deg); }
      85% { transform: rotate(5deg); }
      90% { transform: rotate(-5deg); }
      95% { transform: rotate(5deg); }
      100% { transform: rotate(0deg); }
    }

    .contactanos {
      transition: all 0.5s ease;
      cursor: pointer;
      width: auto;
      margin-inline: auto;
      background-color: #DD7755;
      border-radius: 20px;
      padding: 5px;
      padding-inline: 10px;
      margin-bottom: 10px;
      font-size: 14pt; text-align: center; font-family: 'Alice';
      animation-name: contactanosanim;
      animation-timing-function: ease-in-out;
      animation-duration: 2s;
      animation-iteration-count: infinite;
    }

    .contactanos:hover {
      background-color: #EDB6A3;
    }

    .contactanos:active {
      opacity: 0.5;
    }

    .product.out_of_stock {
        opacity: 0.25;
        position: relative;
    }

    .product.out_of_stock::after {
        content: "AGOTADO";
        font-size: 20pt;
        color: black;
        background-color: #f45b69;
        box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
        padding: 5px;
        padding-inline: 10px;
        border-radius: 10px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translateX(-50%) translateY(-50%);
    }

    /* For Mobile */
    @media only screen and (pointer:none), (pointer:coarse) {
      .title2 {
        font-size: 48pt;
        transform: translateX(-50%) translateY(90%);
        text-shadow: 0px 10px 10px rgba(0,0,0,0.1),
             0px 4px 6px rgba(0,0,0,0.02),
             0px 9px 11px rgba(0,0,0,0.02);
        text-align: center;
      }

      .imgparent {
        width: 100%;
        height: 300px;
        margin-inline: auto;
      }

      .img.main {
        margin-bottom: 0;
      }

      .main .content {
        width: 100%; margin-inline: auto;
        display: flex;
        flex-direction: column-reverse;
        position: absolute; top: 50%; transform: translateY(-50%);
        height: auto;
      }

      .content {
        padding: 30px;
      }

      .main .content > div.cvh {
        position: initial;
        top: 0;
        left: 0;
        transform: none;
      }

      .products {
        display: flex;
        flex-direction: column;
        margin-inline: auto;
      }

      .products > div {
        height: auto;
      }

      .price {
        margin-top: 20px;
      }

      .cats {
        width: 300px;
        margin-inline: auto;
        margin-bottom: 30px;
      }

      .cats > div {
        margin-right: 30px;
      }

      .bullets > div > div {
        width: 15px;
        height: 15px;
      }

      .bullets > div > div:not(:last-child) {
        margin-right: 15px;
      }

      .scroller {
        height: 100%;
      }
    }
  </style>

  <body>
    <div class="scrollable">
      <div class="main fcol w100 h100" style="background: rgb(248,244,249); background: linear-gradient(0deg, rgba(248,244,249,1) 13%, rgba(255,217,206,1) 100%);">
        <div class="h100 w100" style="position: relative">
          <div class="frow jc w100" style="position: absolute; top: 30px">
            <div class="title">Bolston</div>
          </div>
          <div class="scroller"></div>
          <div class="w100" style="position: absolute; bottom: 40px">
            <div onclick="arrowClicked()" class="long-arrow-right"></div>
          </div>
        </div>
      </div>
  
      <div class="fcol w100" style="background-color: #F8F4F9;">
        <div class="h100 w100" style="position: relative">
          <div class="fcol content w100 h100">
            <div class="cats frow js"></div>
            <div class="products"></div>
          </div>
        </div>
      </div>

      <div class="fcol w100" style="padding-top: 20px; padding-bottom: 50px; background: rgb(255,217,206); background: linear-gradient(0deg, rgba(255,217,206,1) 13%, rgba(248,244,249,1) 100%);">
        <div class="contactanos" onclick="contactanos()">Contactanos</div>
        <div class="w100" style="font-family: 'Pacifico'; font-size: 14pt; text-align: center">Bolston, 2023</div>
      </div>
    </div>

    <script>
      var cats_offset = $('.cats').offset().top - 30;

      is_mobile_ = window.matchMedia("only screen and (pointer:none), (pointer:coarse)").matches;

      cur_cat = 2;

      // Load main page scroller items
      sid_ = 0;
      for (const i of product_config['scroller']) {
        html_ = '<div class="content w100 h100' + (sid_ == 0 ? ' ha' : '') + '">';
        html_ += '<div class="title2 cvh">' + i['text'] + '</div>';
        html_ += '<div class="cvh imgparent frow">';
        html_ += '<img class="main" src="../images/' + i['image'] + '" alt="">';
        html_ += '</div>';
        html_ += '</div>';

        $('.scroller').append(html_);
        sid_ += 1;
      }

      // Load products
      cat_id = 0;
      for (const cat of product_config['categories']) {
        catname = cat['name'];
        shortname = cat['shortname'];

        $('.cats').append('<div' + (cat_id == 0 ? ' class="active"' : '') + ' data-cat="' + catname + '" data-shortname="' + shortname + '">' + (is_mobile_ ? (cat_id == 0 ? catname : ('[' + shortname + ']')) : catname) + '</div>');

        product_id = 0;
        for (const product of cat['products']) {
          name = product['name'];
          desc = product['description'];
          price = product['price'];
          sku = product['code'];
          out_of_stock = product['out_of_stock'];
          height = undefined;
          if (!is_mobile_) {
            if (product['height'] != undefined) {
              height = product['height'];
            }
          }

          // Build HTML
          html_ = '<div class="fcol' + (out_of_stock ? ' out_of_stock' : '') + ' h100 jb product' + (cat_id == 0 ? '' : ' h') + '"' + (height == undefined ? '' : ' style="height: ' + height + 'px"') +' data-cat="' + catname + '" data-cat-id="' + String(cat_id) + '" data-product-id="' + String(product_id) + '">';
          html_ += '<div>';

          html_ += '<div class="img-parent frow">';
          images_keys = Object.keys(product['images']);
          images_ = product['images'][images_keys[0]];
          for (const i of images_) {
            html_ += '<img src="' + '../images/' + i + '" alt="">';
          }
          html_ += '</div>';

          html_ += '<div class="bullets frow jc">';
          html_ += '<div class="frow">';
          if (images_.length > 1) {
            for (i = 0; i < images_.length; i++) {
              html_ += '<div onclick="bulletClicked(this)"' + (i == 0 ? ' class="active"' : '') + '></div>';
            }
          }
          html_ += '</div>';
          html_ += '</div>';

          html_ += '<div class="title">' + name + '</div>';

          html_ += '<div class="frow jb subtitle">';
          html_ += '<div>Color</div>';
          html_ += '<div class="colors frow">';
          for (i = 0; i < images_keys.length; i++) {
            k = images_keys[i];
            color_border = 'none';
            if (product['color_borders'] != undefined) {
              if (product['color_borders'][k] != undefined) {
                color_border = '2px solid ' + product['color_borders'][k];
              }
            }
            html_ += '<div ' + (images_keys.length > 1 ? 'onclick="colorClicked(this)"' : '') + ' data-color-name="' + product['colors'][k] + '"' + ' data-color="' + k + '" style="background-color: ' + k + '; border: ' + color_border + '"' + (i == 0 ? ' class="active"' : '') + '></div>';
          }
          html_ += '</div>';
          html_ += '</div>';

          html_ += '<div class="text">' + desc + '</div>';
          html_ += '</div>';
          html_ += '<div class="frow jb">';
          html_ += '<div class="price"><span>S/</span>' + String(price) + '</div>';
          html_ += '<div class="fcol je">';
          if (!out_of_stock) {
            html_ += '<button onclick="quieroClicked(this, ' + "'" + sku + "'" + ')">Quiero</button>';
          }
          html_ += '</div>';
          html_ += '</div>';
          html_ += '</div>';

          // Append HTML
          $('.products').append(html_);

          product_id += 1;
        }
        cat_id += 1;
      }
      
      if (product_config['categories'].length > 1) {
        setInterval(function() {
          $('.main .content').removeClass('ha');
          $('.main .content:nth-child(' + String(cur_cat) + ')').addClass('ha');
          if (cur_cat == $('.scroller > .content').length) {
            cur_cat = 1;
          } else {
            cur_cat += 1;
          }
        }, 4000) 
      }

      function bulletClicked(this_) {
        $(this_).parent().find('div').removeClass('active');
        $(this_).addClass('active');

        id_ = $(this_).index();

        offset = 0;
        if (id_ == $(this_).parent().find('div').length - 1) {
          offset = 300 * id_;
        } else if (id_ == 0) {
          offset = 0;
        } else {
          offset = 290 * id_;
        }

        product = $(this_).closest('.product');
        $(product).find('.img-parent').animate({
            scrollLeft: offset
        }, 500);
      }

      function colorClicked(this_) {
        $(this_).parent().find('div').removeClass('active');
        $(this_).addClass('active');

        color = $(this_).attr('data-color');
        product = $(this_).closest('.product');
        cat_id = parseInt($(product).attr('data-cat-id'));
        product_id = parseInt($(product).attr('data-product-id'));
        $(product).find('.img-parent').html('');
        $(product).find('.bullets > div').html('');

        images = product_config['categories'][cat_id]['products'][product_id]['images'][color];

        for (const i of images) {
          $(product).find('.img-parent').append('<img src="' + '../images/' + i + '">');
          if (images.length > 1) {
            $(product).find('.bullets > div').append('<div onclick="bulletClicked(this)"></div>');
          }
        }
        $(product).find('.bullets > div > div:first-child').addClass('active');
        $(product).find('.img-parent').animate({
            scrollLeft: 0
        }, 500);
      }

      function arrowClicked() {
        $('.scrollable').animate({
            scrollTop: cats_offset
        }, 1000);
      }

      function quieroClicked(this_, code) {
        color_ = $(this_).closest('.product').find('.colors > div.active').attr('data-color-name');
        window.location = 'https://api.whatsapp.com/send?phone=' + product_config['phone'] + '&text=Hola! Quiero saber mÃ¡s de producto con codigo ' + code + ' de color ' + color_;
      }

      function contactanos() {
        window.location = 'https://api.whatsapp.com/send?phone=' + product_config['phone'] + '&text=Hola! ';
      }

      $('.cats > div').on('click', function() {
        $('.cats > div').removeClass('active');
        $(this).addClass('active');
        cat = $(this).attr('data-cat');
        $('.products > div').addClass('h');
        $('.products > div[data-cat="' + cat + '"]').removeClass('h');
        $('.products > div.nohide').removeClass('h');

        if (is_mobile_) {
          $('.cats > div').each(function(i, el) {
            $(el).text('[' + $(el).attr('data-shortname') + ']');
          })
          $(this).text($(this).attr('data-cat'));
        }
      })
    </script>
  </body>
</html>
